L.Google=(L.Layer||L.Class).extend({includes:L.Evented?L.Evented.prototype:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:false,noWrap:false,mapOptions:{backgroundColor:"#dddddd"}},initialize:function(b,a){L.Util.setOptions(this,a);this._ready=google.maps.Map!=undefined;if(!this._ready){L.Google.asyncWait.push(this)}this._type=b||"SATELLITE";this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(f,e){var c=0;var d=null;d=setInterval(function(){if(c>=10){clearInterval(d);return e(new Error("window.google not found after 10 attempts"))}if(!!window.google&&!!window.google.maps&&!!window.google.maps.Map){clearInterval(d);return f(window.google)}c++},500)})},onAdd:function(b,a){this._map=b;this._insertAtTheBottom=a;this._initContainer();this._initMapObject();b.on("viewreset",this._resetCallback,this);this._limitedUpdate=L.Util.limitExecByInterval?L.Util.limitExecByInterval(this._update,150,this):L.Util.throttle(this._update,150,this);b.on("move drag zoomend",this._update,this);b.on("zoomanim",this._handleZoomAnim,this);b._controlCorners.bottomright.querySelector(".leaflet-control-attribution").style.display="none";this._reset();this._update()},onRemove:function(a){this._map._container.removeChild(this._container);this._map.off("viewreset",this._resetCallback,this);this._map.off("move drag zoomend",this._update,this);this._map.off("zoomanim",this._handleZoomAnim,this);a._controlCorners.bottomright.querySelector(".leaflet-control-attribution").style.display=""},getAttribution:function(){return this.options.attribution},setOpacity:function(a){this.options.opacity=a;if(a<1){L.DomUtil.setOpacity(this._container,a)}},setElementSize:function(b,a){b.style.width=a.x+"px";b.style.height=a.y+"px"},_initContainer:function(){var a=this._map._container,b=a.firstChild;if(!this._container){this._container=L.DomUtil.create("div","leaflet-google-layer");this._container.id="_GMapContainer_"+L.Util.stamp(this);this._container.style.zIndex="400"}a.insertBefore(this._container,b);this.setOpacity(this.options.opacity);this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(!this._ready){return}this._google_center=new google.maps.LatLng(0,0);var b=new google.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:true,keyboardShortcuts:false,zoomControl:false,draggable:false,disableDoubleClickZoom:true,scrollwheel:false,streetViewControl:true,backgroundColor:"transparent"});var c=this;this._google=b;google.maps.event.addListenerOnce(b,"idle",function(){c._checkZoomLevels();c._pegamenFix()});var a=b.getStreetView();if(a){google.maps.event.addListener(a,"visible_changed",function(){if(a.getVisible()){c._map._container.classList.add("google-streetview-enabled")}else{c._map._container.classList.remove("google-streetview-enabled")}})}},_checkZoomLevels:function(){if(this._google.getZoom()!==this._map.getZoom()){this._map.setZoom(this._google.getZoom())}},_pegamenFix:function(){var b=this;var a=setInterval(function(){var c=document.querySelector(".gm-svpc");if(c){c.addEventListener("mouseover",function(){b._map.dragging.disable()});c.addEventListener("mouseout",function(){b._map.dragging.enable()});clearInterval(a)}},100)},_resetCallback:function(a){this._reset(a.hard)},_reset:function(a){this._initContainer()},_update:function(c){if(!this._google){return}this._resize();var a=c&&c.latlng?c.latlng:this._map.getCenter();var b=new google.maps.LatLng(a.lat,a.lng);this._google.setCenter(b);this._google.setZoom(this._map.getZoom());this._checkZoomLevels()},_resize:function(){var a=this._map.getSize();if(this._container.style.width==a.x&&this._container.style.height==a.y){return}this.setElementSize(this._container,a);this.onReposition()},_handleZoomAnim:function(c){var a=c.center;var b=new google.maps.LatLng(a.lat,a.lng);this._google.setCenter(b);this._google.setZoom(c.zoom)},onReposition:function(){if(!this._google){return}google.maps.event.trigger(this._google,"resize")}});L.Google.asyncWait=[];L.Google.asyncInitialize=function(){var a;for(a=0;a<L.Google.asyncWait.length;a++){var b=L.Google.asyncWait[a];b._ready=true;if(b._container){b._initMapObject();b._update()}}L.Google.asyncWait=[]};